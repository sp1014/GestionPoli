{"ast":null,"code":"import _classCallCheck from \"C:/Users/user/Videos/FRONTTTTTT/vue/theme/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/user/Videos/FRONTTTTTT/vue/theme/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"C:/Users/user/Videos/FRONTTTTTT/vue/theme/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/user/Videos/FRONTTTTTT/vue/theme/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/user/Videos/FRONTTTTTT/vue/theme/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"C:/Users/user/Videos/FRONTTTTTT/vue/theme/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.string.sub.js\";\nimport EventEmitter from 'events';\nimport auth0 from 'auth0-js';\nimport config from '../../config.json';\nvar userlogin = 'islogged';\nvar loginExpiryKey = 'tokenExpiry';\nvar Userinfo = 'userinfo';\nvar localStorageKey = 'loggedIn';\nvar auth1 = new auth0.WebAuth({\n  domain: config.auth0.domain,\n  clientID: config.auth0.clientID,\n  responseType: 'id_token',\n  redirectUri: window.location.origin + process.env.BASE_URL + 'callback',\n  scope: 'openid profile' // define the scopes you want to use\n\n});\n\nvar Auth = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Auth, _EventEmitter);\n\n  var _super = _createSuper(Auth);\n\n  function Auth() {\n    var _this;\n\n    _classCallCheck(this, Auth);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"authToken\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"userProfile\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"tokenExpiry\", null);\n\n    return _this;\n  }\n\n  _createClass(Auth, [{\n    key: \"localLogin\",\n    value: // Login With Firebase\n    function localLogin(authResult) {\n      this.tokenExpiry = new Date();\n      localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n      localStorage.setItem(userlogin, 'true');\n      localStorage.setItem(Userinfo, JSON.stringify({\n        displayName: authResult.user.displayName,\n        email: authResult.user.email,\n        photoURL: authResult.user.photoURL\n      }));\n    }\n  }, {\n    key: \"Logout\",\n    value: function Logout() {\n      localStorage.removeItem(loginExpiryKey);\n      localStorage.removeItem(userlogin);\n      localStorage.removeItem(Userinfo);\n    }\n  }, {\n    key: \"isAuthenticated\",\n    value: function isAuthenticated() {\n      return new Date(Date.now()) !== new Date(localStorage.getItem(loginExpiryKey)) && localStorage.getItem(userlogin) === 'true';\n    } // login with Auth0\n\n  }, {\n    key: \"login\",\n    value: function login() {\n      auth1.authorize();\n    } // Handle Auth0 Callback\n\n  }, {\n    key: \"handleAuthentication\",\n    value: function handleAuthentication() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        auth1.parseHash(function (err, authResult) {\n          if (authResult.idToken) {\n            _this2.localAuthLogin(authResult);\n\n            resolve(authResult);\n          } else if (err) {\n            return reject(err);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"localAuthLogin\",\n    value: function localAuthLogin(authResult) {\n      this.idToken = authResult.idToken;\n      this.userProfile = authResult.idTokenPayload;\n      this.tokenExpiry = new Date(this.userProfile.exp * 1000);\n      localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n      localStorage.setItem(localStorageKey, 'true');\n      localStorage.setItem(Userinfo, JSON.stringify({\n        displayName: this.userProfile.name,\n        email: this.userProfile.email,\n        photoURL: this.userProfile.picture,\n        providerId: this.userProfile.sub.substr(0, this.userProfile.sub.indexOf('|')),\n        uid: this.userProfile.sub\n      }));\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut() {\n      localStorage.removeItem(localStorageKey);\n      localStorage.removeItem(loginExpiryKey);\n      localStorage.removeItem(Userinfo);\n      this.idToken = null;\n      this.tokenExpiry = null;\n      this.profile = null;\n      auth1.logout({\n        returnTo: window.location.origin + process.env.BASE_URL\n      });\n    }\n  }, {\n    key: \"isAuthenticatedUser\",\n    value: function isAuthenticatedUser() {\n      return new Date(Date.now()) < new Date(localStorage.getItem(loginExpiryKey)) && localStorage.getItem(localStorageKey) === 'true';\n    }\n  }]);\n\n  return Auth;\n}(EventEmitter);\n\nexport default new Auth();","map":{"version":3,"names":["EventEmitter","auth0","config","userlogin","loginExpiryKey","Userinfo","localStorageKey","auth1","WebAuth","domain","clientID","responseType","redirectUri","window","location","origin","process","env","BASE_URL","scope","Auth","authResult","tokenExpiry","Date","localStorage","setItem","JSON","stringify","displayName","user","email","photoURL","removeItem","now","getItem","authorize","Promise","resolve","reject","parseHash","err","idToken","localAuthLogin","userProfile","idTokenPayload","exp","name","picture","providerId","sub","substr","indexOf","uid","profile","logout","returnTo"],"sources":["C:/Users/user/Videos/FRONTTTTTT/vue/theme/src/auth/js/index.js"],"sourcesContent":["import EventEmitter from 'events';\nimport auth0 from 'auth0-js';\nimport config from '../../config.json';\n\nconst userlogin = 'islogged';\nconst loginExpiryKey = 'tokenExpiry';\nconst Userinfo = 'userinfo';\nconst localStorageKey = 'loggedIn';\nconst auth1 = new auth0.WebAuth({\n    domain: config.auth0.domain,\n    clientID: config.auth0.clientID,\n    responseType: 'id_token',\n    redirectUri:  window.location.origin + process.env.BASE_URL + 'callback',\n    scope: 'openid profile' // define the scopes you want to use\n});\n\nclass Auth extends EventEmitter {\n    authToken = null\n    userProfile = null\n    tokenExpiry = null \n    // Login With Firebase\n    localLogin(authResult) {\n        this.tokenExpiry = new Date();\n        localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n        localStorage.setItem(userlogin, 'true');\n        localStorage.setItem(Userinfo, JSON.stringify({\n            displayName : authResult.user.displayName,\n            email : authResult.user.email,\n            photoURL : authResult.user.photoURL,\n        }));\n    }\n\n    Logout() {\n        localStorage.removeItem(loginExpiryKey);\n        localStorage.removeItem(userlogin);\n        localStorage.removeItem(Userinfo);\n    }\n\n    isAuthenticated() {\n        return (\n            new Date(Date.now()) !==  new Date(localStorage.getItem(loginExpiryKey)) &&\n            localStorage.getItem(userlogin) === 'true'\n        );\n    }\n\n    // login with Auth0\n    login () {\n        auth1.authorize();\n    }\n\n    // Handle Auth0 Callback\n    handleAuthentication () {\n    return new Promise((resolve, reject) => {\n      auth1.parseHash((err, authResult) => {\n        if (authResult.idToken) {\n            this.localAuthLogin(authResult);\n            resolve(authResult);  \n        } else if (err) {\n            return reject(err);\n        }\n        });\n      });\n    } \n\n    localAuthLogin(authResult) {        \n        this.idToken = authResult.idToken;\n        this.userProfile = authResult.idTokenPayload;\n        this.tokenExpiry = new Date(this.userProfile.exp * 1000);\n        localStorage.setItem(loginExpiryKey, this.tokenExpiry);\n        localStorage.setItem(localStorageKey, 'true');\n        localStorage.setItem(Userinfo, JSON.stringify({\n            displayName: this.userProfile.name,\n            email: this.userProfile.email,\n            photoURL: this.userProfile.picture,\n            providerId: this.userProfile.sub.substr(0, this.userProfile.sub.indexOf('|')),\n            uid: this.userProfile.sub\n        }));\n    }\n\n    logOut() {\n        localStorage.removeItem(localStorageKey);\n        localStorage.removeItem(loginExpiryKey);\n        localStorage.removeItem(Userinfo);\n        this.idToken = null;\n        this.tokenExpiry = null;\n        this.profile = null;\n        auth1.logout({\n            returnTo: window.location.origin + process.env.BASE_URL\n        });\n    }\n\n    isAuthenticatedUser() {        \n        return (\n            new Date(Date.now()) < new Date(localStorage.getItem(loginExpiryKey)) &&\n            localStorage.getItem(localStorageKey) === 'true'\n        );\n    }\n}\n\nexport default new Auth();\n"],"mappings":";;;;;;;;;;;AAAA,OAAOA,YAAP,MAAyB,QAAzB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,IAAMC,SAAS,GAAG,UAAlB;AACA,IAAMC,cAAc,GAAG,aAAvB;AACA,IAAMC,QAAQ,GAAG,UAAjB;AACA,IAAMC,eAAe,GAAG,UAAxB;AACA,IAAMC,KAAK,GAAG,IAAIN,KAAK,CAACO,OAAV,CAAkB;EAC5BC,MAAM,EAAEP,MAAM,CAACD,KAAP,CAAaQ,MADO;EAE5BC,QAAQ,EAAER,MAAM,CAACD,KAAP,CAAaS,QAFK;EAG5BC,YAAY,EAAE,UAHc;EAI5BC,WAAW,EAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyBC,OAAO,CAACC,GAAR,CAAYC,QAArC,GAAgD,UAJlC;EAK5BC,KAAK,EAAE,gBALqB,CAKJ;;AALI,CAAlB,CAAd;;IAQMC,I;;;;;;;;;;;;;;;;gEACU,I;;kEACE,I;;kEACA,I;;;;;;;WACd;IACA,oBAAWC,UAAX,EAAuB;MACnB,KAAKC,WAAL,GAAmB,IAAIC,IAAJ,EAAnB;MACAC,YAAY,CAACC,OAAb,CAAqBrB,cAArB,EAAqC,KAAKkB,WAA1C;MACAE,YAAY,CAACC,OAAb,CAAqBtB,SAArB,EAAgC,MAAhC;MACAqB,YAAY,CAACC,OAAb,CAAqBpB,QAArB,EAA+BqB,IAAI,CAACC,SAAL,CAAe;QAC1CC,WAAW,EAAGP,UAAU,CAACQ,IAAX,CAAgBD,WADY;QAE1CE,KAAK,EAAGT,UAAU,CAACQ,IAAX,CAAgBC,KAFkB;QAG1CC,QAAQ,EAAGV,UAAU,CAACQ,IAAX,CAAgBE;MAHe,CAAf,CAA/B;IAKH;;;WAED,kBAAS;MACLP,YAAY,CAACQ,UAAb,CAAwB5B,cAAxB;MACAoB,YAAY,CAACQ,UAAb,CAAwB7B,SAAxB;MACAqB,YAAY,CAACQ,UAAb,CAAwB3B,QAAxB;IACH;;;WAED,2BAAkB;MACd,OACI,IAAIkB,IAAJ,CAASA,IAAI,CAACU,GAAL,EAAT,MAA0B,IAAIV,IAAJ,CAASC,YAAY,CAACU,OAAb,CAAqB9B,cAArB,CAAT,CAA1B,IACAoB,YAAY,CAACU,OAAb,CAAqB/B,SAArB,MAAoC,MAFxC;IAIH,C,CAED;;;;WACA,iBAAS;MACLI,KAAK,CAAC4B,SAAN;IACH,C,CAED;;;;WACA,gCAAwB;MAAA;;MACxB,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;QACtC/B,KAAK,CAACgC,SAAN,CAAgB,UAACC,GAAD,EAAMnB,UAAN,EAAqB;UACnC,IAAIA,UAAU,CAACoB,OAAf,EAAwB;YACpB,MAAI,CAACC,cAAL,CAAoBrB,UAApB;;YACAgB,OAAO,CAAChB,UAAD,CAAP;UACH,CAHD,MAGO,IAAImB,GAAJ,EAAS;YACZ,OAAOF,MAAM,CAACE,GAAD,CAAb;UACH;QACA,CAPH;MAQC,CATI,CAAP;IAUC;;;WAED,wBAAenB,UAAf,EAA2B;MACvB,KAAKoB,OAAL,GAAepB,UAAU,CAACoB,OAA1B;MACA,KAAKE,WAAL,GAAmBtB,UAAU,CAACuB,cAA9B;MACA,KAAKtB,WAAL,GAAmB,IAAIC,IAAJ,CAAS,KAAKoB,WAAL,CAAiBE,GAAjB,GAAuB,IAAhC,CAAnB;MACArB,YAAY,CAACC,OAAb,CAAqBrB,cAArB,EAAqC,KAAKkB,WAA1C;MACAE,YAAY,CAACC,OAAb,CAAqBnB,eAArB,EAAsC,MAAtC;MACAkB,YAAY,CAACC,OAAb,CAAqBpB,QAArB,EAA+BqB,IAAI,CAACC,SAAL,CAAe;QAC1CC,WAAW,EAAE,KAAKe,WAAL,CAAiBG,IADY;QAE1ChB,KAAK,EAAE,KAAKa,WAAL,CAAiBb,KAFkB;QAG1CC,QAAQ,EAAE,KAAKY,WAAL,CAAiBI,OAHe;QAI1CC,UAAU,EAAE,KAAKL,WAAL,CAAiBM,GAAjB,CAAqBC,MAArB,CAA4B,CAA5B,EAA+B,KAAKP,WAAL,CAAiBM,GAAjB,CAAqBE,OAArB,CAA6B,GAA7B,CAA/B,CAJ8B;QAK1CC,GAAG,EAAE,KAAKT,WAAL,CAAiBM;MALoB,CAAf,CAA/B;IAOH;;;WAED,kBAAS;MACLzB,YAAY,CAACQ,UAAb,CAAwB1B,eAAxB;MACAkB,YAAY,CAACQ,UAAb,CAAwB5B,cAAxB;MACAoB,YAAY,CAACQ,UAAb,CAAwB3B,QAAxB;MACA,KAAKoC,OAAL,GAAe,IAAf;MACA,KAAKnB,WAAL,GAAmB,IAAnB;MACA,KAAK+B,OAAL,GAAe,IAAf;MACA9C,KAAK,CAAC+C,MAAN,CAAa;QACTC,QAAQ,EAAE1C,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyBC,OAAO,CAACC,GAAR,CAAYC;MADtC,CAAb;IAGH;;;WAED,+BAAsB;MAClB,OACI,IAAIK,IAAJ,CAASA,IAAI,CAACU,GAAL,EAAT,IAAuB,IAAIV,IAAJ,CAASC,YAAY,CAACU,OAAb,CAAqB9B,cAArB,CAAT,CAAvB,IACAoB,YAAY,CAACU,OAAb,CAAqB5B,eAArB,MAA0C,MAF9C;IAIH;;;;EAhFcN,Y;;AAmFnB,eAAe,IAAIoB,IAAJ,EAAf"},"metadata":{},"sourceType":"module"}